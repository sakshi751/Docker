name: tr id

on:
  push:
    branches:
      - main

jobs:
  extractDetails:
    runs-on: ubuntu-latest

    steps:
      - name: Update field value in Jira
        run: |
          existingValue=$(curl -s -u "arpit.munet@canadapost.postescanada.ca:ATATT3xFfGF0y6AUYepZmgYYBKWw1EhVJXwqp-YBMf8PISG5VAUy-OmiLqXLFI_e2NRJThkuBWUN7vdlSJByjWSeown754fZ6vWuXTqE8SFjFacpXPNhJ0JtHM5aXhZqC1sd2lco0LvM0osAAml4Cr2BJJxHFwx843TL7jooaPZS-QRJn_lfBMk=AAB811F9" \
          -X GET 'https://cpg-gpc-xt-hub.atlassian.net/rest/api/3/issue/DEV-30' | \
          jq -r '.fields.customfield_10228')
    
          updatedValue=$(echo "$existingValue" | jq -r '.content[0].content[0].text')
          echo "Text value: $updatedValue"
          echo "Updated value: $updatedValue"
          curl -s -u "arpit.munet@canadapost.postescanada.ca:ATATT3xFfGF0y6AUYepZmgYYBKWw1EhVJXwqp-YBMf8PISG5VAUy-OmiLqXLFI_e2NRJThkuBWUN7vdlSJByjWSeown754fZ6vWuXTqE8SFjFacpXPNhJ0JtHM5aXhZqC1sd2lco0LvM0osAAml4Cr2BJJxHFwx843TL7jooaPZS-QRJn_lfBMk=AAB811F9"  \
            -X PUT -H "Content-Type: application/json" \
            -d '{
              "fields": {
                "customfield_10228": "'"$updatedValue"'"
              }
            }' https://cpg-gpc-xt-hub.atlassian.net/rest/api/3/issue/DEV-30
     

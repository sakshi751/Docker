name: Extract JSON Details

on:
  push:
    branches:
      - main

jobs:
  extractDetails:
    runs-on: ubuntu-latest

    steps:
      - name: Access JSON data
        id: access
        run: |
          # Set the JSON data as a string
          echo '{"id": "12345", "name": "example", "description": "This is an example"}' >> json_data.json

      - name: Extract Details
        id: extract
        run: |
          # Parse the JSON data and extract details based on input value using jq
          json_data=$(cat json_data.json)
          value_needed="example"  # Update this with the value you want to search for

          # Extract details using jq
          details=$(echo "$json_data" | jq --arg value "$value_needed" 'select(.name == $value).description')

          echo "Extracted Details: $details"

          # Store the extracted details as an output
          echo "::set-output name=details::$details"

      - name: Use the extracted details
        run: |
          # Access the extracted details
          extracted_details="${{ steps.extract.outputs.details }}"
          echo "Extracted Details: $extracted_details"
